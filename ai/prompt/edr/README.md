# README

이 디렉터리는 **EDR 로그를 분석하기 위한 프롬프트 제작 방법**을 모아둔 곳입니다.

## 📂 파일 설명

* **`event_json.png`**  
  `event_json` 탐지 예시 이미지입니다.

* **`event_json.md`**  
  - [ ] event_json 탐지 이미지를 기반으로 `event_json.yaml`을 생성하기 위한 규칙을 정의합니다.  
  - [ ] 탐지 정보를 규칙에 맞도록 규격화합니다.  
  - [ ] 전체 로그는 별도 분석 없이 raw_log만 입력합니다.  
  - [ ] **event_json은 외부 프로그램으로부터 공급됩니다.**  
  - [ ] **탐지 로그는 `{{$}}`, 원본 로그(raw_log)는 `{{$$$}}` 마커로 구분됩니다.**

  ### 📌 예시
  ```yaml
  event_json: |
    {
      "analysis": {{$}}, 
      "raw_log": "{{$$$}}"
    }
  ```

* `{{$}}` → 외부 프로그램이 삽입하는 사전 분석 결과(JSON 블록)
* `{{$$$}}` → 외부 프로그램이 삽입하는 원본 로그(raw string or JSON)

- **`ex-hybrid.yaml`** 프롬프트 작성 안내  
  - [ ] 윈도우 / 리눅스 로그를 동시에 분석할 수 있도록 설계한 하이브리드 프롬프트 예시입니다.

| 파일명                         | 용도                                | 방법 |
| ------------------------------ | ----------------------------------- | ------------------------------------------------ |
| **`ex-hybrid.yaml`**           | 실제 데이터를 AI에 전달하기 위한 양식 | event_json에 원본 로그(raw_log)와 사전 분석 정보(analysis)가 포함됨 |
| **`ex-hybrid-function.yaml`**  | 사용자가 프롬프트에서 활용하는 양식    | 프롬프트 안에서 **`{{$}}` 마커**를 사용해 데이터가 치환됨 |

---

👉 이렇게 정리하면,

* `ex-hybrid.yaml` = **실제 데이터 전달용**
* `ex-hybrid-function.yaml` = **프롬프트 설계/호출 정의용**
  이라는 차이가 명확해집니다.

원하시면 두 파일의 **핵심 필드 비교 (예: role, event\_json, output\_format)** 도 추가로 나란히 비교해 드릴까요?


- **formatting_rules.yaml**
  출력 양식을 확장하기 위한 예시 규칙입니다.

## 📝 목적

* EDR 탐지 필터를 기반으로 AI 분석 프롬프트를 제작하기 위한 예시 자료입니다.

---

👉 이렇게 반영하면,  
1) `event_json`이 **외부 공급값임을 명확히** 하고,  
2) `{{$}}` / `{{$$$}}` 마커의 의미와 사용 예시를 **구조화된 샘플 블록**으로 보여줄 수 있습니다.  

---

원하시면 제가 `role` 블록 YAML 예시(ex-hybrid.yaml 스타일)에다가도 `"event_json은 외부 공급, 마커 규칙 사용"`을 명시하는 버전까지 추가해 드릴까요?

