# README

이 디렉터리는 **웹 로그(WAF, 웹서버 로그 등)를 분석하기 위한 프롬프트 예시**를 모아둔 곳입니다.

## 📂 파일 설명

* **`event_json.png`**
  웹 로그를 기반으로 생성된 `event_json` 탐지 예시 이미지입니다.

* **`event_json.md`**

  * [ ] 웹 로그 분석 규칙을 정의하여 `event_json.yaml`을 생성하기 위한 기준입니다.
  * [ ] 탐지 정보를 규칙에 맞도록 규격화합니다.
  * [ ] 전체 로그는 별도 분석 없이 raw\_log만 입력합니다.
  * [ ] **event\_json은 외부 프로그램으로부터 공급됩니다.**
  * [ ] **탐지 로그는 `{{$}}`, 원본 로그(raw\_log)는 `{{$$$}}` 마커로 구분됩니다.**

  ### 📌 예시

  ```yaml
  event_json: |
    {
      "analysis": {{$}}, 
      "raw_log": "{{$$$}}"
    }
  ```

  * `{{$}}` → 외부 프로그램이 삽입하는 사전 분석 결과(JSON 블록)
  * `{{$$$}}` → 외부 프로그램이 삽입하는 원본 로그(raw string or JSON)

* **`ex.yaml`**
  실제 웹 로그 데이터를 AI에 전달하기 위한 프롬프트 템플릿입니다.

* **`ex-function.yaml`**
  프롬프트 내부에서 활용되는 정의 파일로, `{{$}}` 마커를 사용해 웹 로그 분석 결과(JSON 블록)가 치환됩니다.

* **`example-result-by-gpt.md`**

  * [ ] `ex.yaml`을 기반으로 GPT가 분석한 실제 출력 예시입니다.
  * [ ] SQL Injection, XSS, Credential Stuffing 등 웹 공격 패턴을 MITRE ATT\&CK에 매핑한 결과를 포함합니다.

---

## 📝 목적

* 웹 방화벽(WAF) 로그, 웹 서버 로그(Apache, Nginx 등)에서 공격 패턴을 탐지하고
* 이를 **일관된 JSON(event\_json) 포맷**으로 구조화하여
* AI 기반 웹 공격 분석 및 대응 시나리오 작성에 활용하기 위함입니다.

---

## 📌 파일 관계

| 파일명                            | 용도                     | 방법                                  |
| ------------------------------ | ---------------------- | ----------------------------------- |
| **`ex.yaml`**                  | 실제 데이터를 AI에 전달하기 위한 양식 | 웹 원본 로그(raw\_log)와 분석 결과 포함         |
| **`ex-function.yaml`**         | 프롬프트 설계/호출 정의용         | 프롬프트 안에서 **`{{$}}` 마커**를 사용해 데이터 치환 |
| **`example-result-by-gpt.md`** | AI 분석 결과 예시            | GPT 출력 포맷을 그대로 저장                   |

---

👉 이렇게 정리하면,

* **EDR = 호스트 로그 기반 분석**
* **TI = 위협 인텔리전스 조회 기반 분석**
* **WEB = 웹 로그 기반 분석**

으로 각각 목적과 구조가 일관되게 맞춰집니다.

---

