# === Solr 접속 ===
SOLR_SCHEME="http"
SOLR_HOST=".61.69"
SOLR_PORT="8983"

# Canary 대상 컬렉션
COLLECTION_CANARY="monitor_canary"

# (선택) 기본 인증 (user:pass). 파일에 보관 시 SOLR_BASIC_AUTH_FILE 사용.
SOLR_BASIC_AUTH=""              # 예) "solradmin:SecretPass"
SOLR_BASIC_AUTH_FILE=""         # 예) "/home/sysadmin/.solr_auth"
CURL_INSECURE="false"           # self-signed TLS라면 "true"

# === Canary 동작 파라미터 ===
COMMIT_WITHIN_MS=2000           # update commitWithin (ms)
MIN_RF=1                        # 달성 복제수 기준치(환경에 맞게 1/2/3 등으로 설정)
READ_VERIFY_RETRIES=3           # 쓰기 후 조회 재확인 횟수
READ_VERIFY_SLEEP_SEC=1         # 재확인 간격(초)

# (선택) ts_dt 필드 사용/청소. 컬렉션에 pdate 필드(ts_dt)가 있을 때만 true.
USE_TS_FIELD="true"
ENABLE_CLEANUP="true"           # true일 때만 deleteByQuery 수행
CLEANUP_DAYS=1                  # ts_dt 기준 보존 일수(1=하루)
CLEANUP_AT_MINUTE="00"          # 매 시 00분에만 청소 수행(부하 방지)

# === 공통 ===
ALERT_EMAILS="alerts@qubitsec.com"  # 장애 메일 수신자(쉼표로 다중 지정 가능)
LOG_TAG="solr_check"                # syslog 태그
STATE_DIR="/tmp"                    # 재시도 카운터/상태 파일 경로
CHECK_NAME="canary_write"           # 체크명(상태 파일/로그 구분)
TIMEOUT_SEC=10                      # 단일 HTTP 타임아웃

# === 내부 파생 변수 (수정 불필요) ===
SOLR_BASE="${SOLR_SCHEME}://${SOLR_HOST}:${SOLR_PORT}/solr"
SOLR_UPDATE_URL="${SOLR_BASE}/${COLLECTION_CANARY}/update"
SOLR_GET_URL="${SOLR_BASE}/${COLLECTION_CANARY}/get"
SOLR_ADMIN_URL="${SOLR_SCHEME}://${SOLR_HOST}:${SOLR_PORT}/solr/admin"
