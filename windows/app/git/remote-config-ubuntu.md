## HOWTO: Windowsì—ì„œ WSL2 Ubuntu ì„¤ì¹˜ í›„ GitLab Dev ì„œë²„ ì ‘ì† í™•ì¸

## ëª©ì 

* Windows í™˜ê²½ì—ì„œ **WSL2 ê¸°ë°˜ Ubuntu**ë¥¼ ì„¤ì¹˜í•œë‹¤
* Ubuntuì—ì„œ **ì‚¬ë‚´ GitLab(dev)** ì„œë²„ì— **SSHë¡œ ì •ìƒ ì ‘ì†/clone** ë˜ëŠ”ì§€ í™•ì¸í•œë‹¤
* ì´í›„ staging / live ë°°í¬ ìë™í™”ë¥¼ ìœ„í•œ ê¸°ë°˜ì„ ë§ˆë ¨í•œë‹¤

---

## 1ë‹¨ê³„: Windows ë²„ì „ í™•ì¸ (ì¤‘ìš”)

WSL2ëŠ” ì•„ë˜ ì¡°ê±´ì„ ë§Œì¡±í•´ì•¼ í•©ë‹ˆë‹¤.

* **Windows 10**: 2004 ì´ìƒ (Build 19041+)
* **Windows 11**: ëª¨ë“  ë²„ì „ ê°€ëŠ¥

### í™•ì¸ ë°©ë²•

PowerShell ë˜ëŠ” CMDì—ì„œ:

```powershell
winver
```

---

## 2ë‹¨ê³„: WSL2 ê¸°ëŠ¥ ì„¤ì¹˜ (ê´€ë¦¬ì ê¶Œí•œ í•„ìˆ˜)

### 2-1. PowerShellì„ ê´€ë¦¬ì ê¶Œí•œìœ¼ë¡œ ì‹¤í–‰

* ì‹œì‘ ë©”ë‰´ â†’ PowerShell
* ìš°í´ë¦­ â†’ **ê´€ë¦¬ì ê¶Œí•œìœ¼ë¡œ ì‹¤í–‰**

### 2-2. WSL ì„¤ì¹˜ ëª…ë ¹ ì‹¤í–‰

```powershell
wsl --install
```

ì´ ëª…ë ¹ì´ ìˆ˜í–‰í•˜ëŠ” ì‘ì—…:

* WSL ê¸°ëŠ¥ í™œì„±í™”
* Virtual Machine Platform í™œì„±í™”
* WSL2 ì»¤ë„ ì„¤ì¹˜

âš ï¸ **ì´ ë‹¨ê³„ í›„ ë°˜ë“œì‹œ ì¬ë¶€íŒ…**

---

## 3ë‹¨ê³„: Ubuntu ë°°í¬íŒ ì„¤ì¹˜

> âš ï¸ ì¬ë¶€íŒ… í›„ **Ubuntu ì°½ì´ ìë™ìœ¼ë¡œ ëœ¨ì§€ ì•ŠëŠ” ê²½ìš°ê°€ ì •ìƒì ìœ¼ë¡œ ë°œìƒí•¨**
> â†’ ìˆ˜ë™ ì„¤ì¹˜ ë° ì‹¤í–‰ í•„ìš”

### 3-1. ì„¤ì¹˜ ê°€ëŠ¥í•œ ë°°í¬íŒ í™•ì¸

```powershell
wsl -l -o
```

### 3-2. Ubuntu 24.04 LTS ì„¤ì¹˜ (ê¶Œì¥)

```powershell
wsl --install -d Ubuntu-24.04
```

ê¶Œì¥ ì´ìœ :

* ìµœì‹  LTS
* SSH / rsync / git ì‚¬ìš© ì•ˆì •ì 
* Rocky Linux ì„œë²„ ìš´ì˜ê³¼ í˜¸í™˜ì„± ìš°ìˆ˜

---

## 4ë‹¨ê³„: Ubuntu ìµœì´ˆ ì‹¤í–‰ ë° ì‚¬ìš©ì ìƒì„±

ì„¤ì¹˜ í›„ **ìë™ìœ¼ë¡œ Ubuntu ì°½ì´ ì•ˆ ëœ¨ë©´**, ì•„ë˜ ì¤‘ í•˜ë‚˜ ì‹¤í–‰:

```powershell
wsl
```

ë˜ëŠ”

```powershell
wsl -d Ubuntu-24.04
```

ë˜ëŠ”

* ì‹œì‘ ë©”ë‰´ â†’ **Ubuntu 24.04 LTS**

### ìµœì´ˆ ì‹¤í–‰ ì‹œ:

```
Please create a default UNIX user account.
```

* ì‚¬ìš©ì ì´ë¦„: ììœ  (ì˜ˆ: `eliot`)
* ë¹„ë°€ë²ˆí˜¸: ì…ë ¥í•´ë„ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠëŠ” ê²ƒì´ ì •ìƒ

---

ì¢‹ì€ í¬ì¸íŠ¸ì…ë‹ˆë‹¤ ğŸ‘
**â€œUbuntuì— ì–´ë–»ê²Œ ì ‘ì†í•˜ëŠ”ì§€ ëª°ë¼ì„œ ë§‰íˆëŠ” ë‹¨ê³„â€**ëŠ” ì‹¤ì œ í˜„ì¥ì—ì„œ ê°€ì¥ ë§ì´ ë°œìƒí•©ë‹ˆë‹¤.
ì•„ë˜ì²˜ëŸ¼ **HOWTO ë¬¸ì„œì— ìì—°ìŠ¤ëŸ½ê²Œ ë¼ì›Œ ë„£ì„ ìˆ˜ ìˆë„ë¡** ì •ë¦¬í•´ì„œ ì¶”ê°€í•´ ë“œë¦¬ê² ìŠµë‹ˆë‹¤.

ì•„ë˜ ë‚´ìš©ì€ **ê·¸ëŒ€ë¡œ ë¬¸ì„œì— ë³µë¶™**í•˜ì…”ë„ ë©ë‹ˆë‹¤.

---

## 5ë‹¨ê³„: WSL2ë¡œ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸

> âš ï¸ ì´ ë‹¨ê³„ë¶€í„°ëŠ” **Ubuntu í„°ë¯¸ë„ì— ì‹¤ì œë¡œ ì ‘ì†í•´ì•¼ í•©ë‹ˆë‹¤.**
> Ubuntuì— ì ‘ì†í•˜ëŠ” ë°©ë²•ì„ ëª¨ë¥´ë©´ ì•„ë˜ **[5-0ë‹¨ê³„]**ë¥¼ ë¨¼ì € ìˆ˜í–‰í•˜ì„¸ìš”.

---

### 5-0ë‹¨ê³„: Ubuntu ì‹¤í–‰ ë°©ë²• (ì¤‘ìš” â­)

> **ì¬ë¶€íŒ… í›„ Ubuntu ì°½ì´ ìë™ìœ¼ë¡œ ëœ¨ì§€ ì•ŠëŠ” ê²½ìš°ê°€ ì •ìƒì ìœ¼ë¡œ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.**
> ì´ ê²½ìš° ì•„ë˜ ë°©ë²• ì¤‘ í•˜ë‚˜ë¡œ **ì§ì ‘ Ubuntuë¥¼ ì‹¤í–‰**í•´ì•¼ í•©ë‹ˆë‹¤.

#### ë°©ë²• 1ï¸âƒ£ (ê°€ì¥ ì‰¬ìš´ ë°©ë²• â€“ ê¶Œì¥)

1. **ìœˆë„ìš° ì‹œì‘ ë²„íŠ¼**ì„ ëˆ„ë¦…ë‹ˆë‹¤.
2. ê²€ìƒ‰ì°½ì— **`Ubuntu`** ë¥¼ ì…ë ¥í•©ë‹ˆë‹¤.
3. **`Ubuntu 24.04 LTS`** ë¥¼ í´ë¦­í•©ë‹ˆë‹¤.

â†’ Ubuntu í„°ë¯¸ë„ ì°½ì´ ì—´ë¦¬ë©´ ì„±ê³µ âœ…

---

#### ë°©ë²• 2ï¸âƒ£ (PowerShellì—ì„œ ì‹¤í–‰)

PowerShell ë˜ëŠ” CMDì—ì„œ:

```powershell
wsl
```

ë˜ëŠ” íŠ¹ì • ë°°í¬íŒì„ ëª…ì‹œ:

```powershell
wsl -d Ubuntu-24.04
```

---

#### ë°©ë²• 3ï¸âƒ£ (ì—¬ëŸ¬ ë°°í¬íŒì´ ìˆëŠ” ê²½ìš°)

ì„¤ì¹˜ëœ ë°°í¬íŒ í™•ì¸:

```powershell
wsl -l
```

ê·¸ í›„:

```powershell
wsl -d Ubuntu-24.04
```

---

### Ubuntu í„°ë¯¸ë„ì´ ì—´ë¦¬ë©´ ì •ìƒ í™”ë©´ ì˜ˆ

```text
eliot@DESKTOP-XXXX:~$
```

ì´ í”„ë¡¬í”„íŠ¸ê°€ ë³´ì´ë©´ **Ubuntuì— ì •ìƒ ì ‘ì†ëœ ìƒíƒœ**ì…ë‹ˆë‹¤.

---

## 5ë‹¨ê³„(ê³„ì†): WSL2ë¡œ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸

Ubuntu í„°ë¯¸ë„ì„ **ì—´ì–´ ë‘” ìƒíƒœ**ì—ì„œ
PowerShell(ë˜ëŠ” ìƒˆ ì°½)ì—ì„œ ì‹¤í–‰:

```powershell
wsl -l -v
```

ì •ìƒ ì˜ˆ:

```
NAME            STATE   VERSION
Ubuntu-24.04    Running 2
```

### VERSIONì´ 1ì´ë©´ WSL2ë¡œ ë³€ê²½

```powershell
wsl --set-version Ubuntu-24.04 2
```

### ê¸°ë³¸ ë°°í¬íŒìœ¼ë¡œ ì„¤ì • (ê¶Œì¥)

```powershell
wsl --set-default Ubuntu-24.04
```

---

## 6ë‹¨ê³„: Ubuntu ê¸°ë³¸ ì—…ë°ì´íŠ¸ ë° í•„ìˆ˜ ë„êµ¬ ì„¤ì¹˜

> âš ï¸ **ì´ ë‹¨ê³„ë¶€í„°ëŠ” ë°˜ë“œì‹œ Ubuntu í„°ë¯¸ë„ì—ì„œ ì‹¤í–‰í•©ë‹ˆë‹¤.**
> (PowerShell âŒ, CMD âŒ)

### 6-1. Ubuntu íŒ¨í‚¤ì§€ ì—…ë°ì´íŠ¸

```bash
sudo apt update && sudo apt upgrade -y
```

---

### 6-2. GitLab ì ‘ì† ë° ë°°í¬ í•„ìˆ˜ ë„êµ¬ ì„¤ì¹˜

```bash
sudo apt install -y openssh-client rsync git
```

ì„¤ì¹˜ë˜ëŠ” ì£¼ìš” ë„êµ¬:

* `ssh` : GitLab / Rocky ì„œë²„ ì ‘ì†
* `rsync` : ë°°í¬ ë™ê¸°í™”
* `git` : GitLab ì €ì¥ì†Œ ì ‘ê·¼

---

### 6-3. ì„¤ì¹˜ í™•ì¸ (ê¶Œì¥)

```bash
ssh -V
rsync --version
git --version
```

ë²„ì „ ì •ë³´ê°€ ì¶œë ¥ë˜ë©´ ì •ìƒì…ë‹ˆë‹¤ âœ…

---

## ì •ë¦¬ (ì´ ë‹¨ê³„ê¹Œì§€ ì™„ë£Œí•˜ë©´)

* âœ” Ubuntu ì‹¤í–‰ ë°©ë²•ì„ ëª…í™•íˆ ì´í•´í•¨
* âœ” WSL2(Version 2)ë¡œ ì •ìƒ ë™ì‘
* âœ” GitLab dev ì„œë²„ ì ‘ì†ì„ ìœ„í•œ í•„ìˆ˜ ë„êµ¬ ì¤€ë¹„ ì™„ë£Œ

---

## 7ë‹¨ê³„: Ubuntuì—ì„œ GitLab Dev ì„œë²„ ì ‘ì† ì¤€ë¹„ (SSH)

### 7-1. SSH í‚¤ ì¡´ì¬ ì—¬ë¶€ í™•ì¸

```bash
ls ~/.ssh
```

ì—†ë‹¤ë©´ ìƒì„±:

```bash
ssh-keygen -t ed25519 -C "wsl-ubuntu"
```

* ê²½ë¡œ: ì—”í„° (ê¸°ë³¸ê°’)
* íŒ¨ìŠ¤í”„ë ˆì´ì¦ˆ: í•„ìš” ì—†ìœ¼ë©´ ì—”í„°

---

### 7-2. GitLab Dev ì„œë²„ì— SSH í‚¤ ë“±ë¡

Ubuntuì—ì„œ ê³µê°œí‚¤ ì¶œë ¥:

```bash
cat ~/.ssh/id_ed25519.pub
```

GitLab ì›¹ UI:

```
Profile â†’ Preferences â†’ SSH Keys
```

* Key: ê³µê°œí‚¤ ë¶™ì—¬ë„£ê¸°
* Title: `wsl-ubuntu`
* Add key

---

## 8ë‹¨ê³„: GitLab Dev ì„œë²„ SSH ì ‘ì† í…ŒìŠ¤íŠ¸ (ì¤‘ìš”)

Ubuntu í„°ë¯¸ë„ì—ì„œ:

```bash
ssh -T git@gitlab.plura.internal
```

ì •ìƒ ì¶œë ¥ ì˜ˆ:

```
Welcome to GitLab, @eliot!
```

â— ì²˜ìŒ ì ‘ì† ì‹œ:

```
Are you sure you want to continue connecting (yes/no)?
```

â†’ `yes`

---

## 9ë‹¨ê³„: GitLab `config/system` í”„ë¡œì íŠ¸ ì ‘ì† í™•ì¸ (í•µì‹¬)

### GitLab êµ¬ì¡°

* GitLab ì„œë²„: `gitlab.plura.internal`
* Group: `config`
* Project: `system`

### ì˜¬ë°”ë¥¸ clone URL (SSH)

```text
git@gitlab.plura.internal:config/system.git
```

### Ubuntuì—ì„œ clone

```bash
git clone git@gitlab.plura.internal:config/system.git
```

ì •ìƒ ê²°ê³¼:

```
Cloning into 'system'...
```

---

## 10ë‹¨ê³„: clone ê²°ê³¼ í™•ì¸

```bash
cd system
ls
```

ì˜ˆ:

```
rhel/
ubuntu/
windows/
Update-9-plura-security.ps1
```

â†’ GitLab dev ì„œë²„ ì ‘ê·¼ ì„±ê³µ ğŸ‰

---

## ì—¬ê¸°ê¹Œì§€ ì™„ë£Œë˜ë©´ ì˜ë¯¸í•˜ëŠ” ê²ƒ

* âœ” Windows â†’ WSL2 â†’ Ubuntu í™˜ê²½ ì •ìƒ
* âœ” Ubuntu â†’ GitLab dev ì„œë²„ ë„¤íŠ¸ì›Œí¬/SSH ì •ìƒ
* âœ” `config/system` í”„ë¡œì íŠ¸ ì ‘ê·¼ ê°€ëŠ¥
* âœ” staging / live ë°°í¬ ìë™í™” ì¤€ë¹„ ì™„ë£Œ

---

## 11ë‹¨ê³„: ì´ë¯¸ cloneëœ `system` í”„ë¡œì íŠ¸ ì—…ë°ì´íŠ¸ ë°©ë²•

GitLabì—ì„œ ì´ë¯¸ `config/system` í”„ë¡œì íŠ¸ë¥¼ cloneí•œ ìƒíƒœì—ì„œ
ë‹¤ì‹œ `git clone`ì„ ì‹¤í–‰í•˜ë©´ ì•„ë˜ ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤.

```
fatal: destination path 'system' already exists and is not an empty directory.
```

ì´ëŠ” **ì •ìƒì ì¸ ë™ì‘**ì´ë©°, ì´ ê²½ìš°ì—ëŠ” **cloneì´ ì•„ë‹ˆë¼ update(pull)** ë¥¼ í•´ì•¼ í•©ë‹ˆë‹¤.

---

### 11-1. í˜„ì¬ ë””ë ‰í„°ë¦¬ê°€ Git ì €ì¥ì†Œì¸ì§€ í™•ì¸

Ubuntu í„°ë¯¸ë„ì—ì„œ `system` ë””ë ‰í„°ë¦¬ë¡œ ì´ë™í•œ ìƒíƒœì—ì„œ ì‹¤í–‰í•©ë‹ˆë‹¤.

```bash
cd ~/system
git rev-parse --is-inside-work-tree
```

* ì¶œë ¥ì´ `true` â†’ âœ… ì •ìƒì ì¸ Git ì €ì¥ì†Œ â†’ **11-2ë‹¨ê³„ë¡œ ì´ë™**
* ì—ëŸ¬ ë°œìƒ â†’ âŒ Git ì €ì¥ì†Œ ì•„ë‹˜ â†’ **11-5ë‹¨ê³„ ì°¸ê³ **

---

### 11-2. ê°€ì¥ ê¸°ë³¸ì ì¸ ì—…ë°ì´íŠ¸ ë°©ë²• (ê¶Œì¥)

```bash
git pull
```

ë˜ëŠ” ê¸°ë³¸ ë¸Œëœì¹˜ê°€ `main`ì¸ ê²½ìš° ëª…ì‹œì ìœ¼ë¡œ:

```bash
git pull origin main
```

â†’ GitLab dev ì„œë²„ì˜ ìµœì‹  ë‚´ìš©ì´ ë¡œì»¬ `system` ë””ë ‰í„°ë¦¬ì— ë°˜ì˜ë©ë‹ˆë‹¤.

---

### 11-3. ë¡œì»¬ ìˆ˜ì • ì‚¬í•­ì´ ìˆì–´ pullì´ ì‹¤íŒ¨í•˜ëŠ” ê²½ìš°

#### ë°©ë²• Aï¸âƒ£ (ë¡œì»¬ ìˆ˜ì • ë³´ì¡´, ê°€ì¥ ì•ˆì „í•¨)

```bash
git stash -u
git pull
git stash pop
```

#### ë°©ë²• Bï¸âƒ£ (âš ï¸ ë¡œì»¬ ìˆ˜ì • ì „ë¶€ ì‚­ì œ, ì„œë²„ì™€ ì™„ì „ ë™ì¼í•˜ê²Œ ë§ì¶¤)

```bash
git fetch origin
git reset --hard origin/main
git clean -fd
```

> âš ï¸ ì´ ë°©ë²•ì€ **ë¡œì»¬ ë³€ê²½ ì‚¬í•­ì´ ëª¨ë‘ ì‚­ì œ**ë˜ë¯€ë¡œ ì£¼ì˜

---

### 11-4. í˜„ì¬ ìƒíƒœ í™•ì¸ (ë¬¸ì œ ë°œìƒ ì‹œ í•„ìˆ˜ ì ê²€)

```bash
git status
git branch --show-current
git log --oneline -5
```

---

### 11-5. `~/system`ì´ Git ì €ì¥ì†Œê°€ ì•„ë‹Œ ì¼ë°˜ í´ë”ì¸ ê²½ìš°

ê³¼ê±°ì— ìˆ˜ë™ìœ¼ë¡œ íŒŒì¼ì„ ë³µì‚¬í–ˆê±°ë‚˜, Gitìœ¼ë¡œ cloneí•˜ì§€ ì•Šì€ í´ë”ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ ê²½ìš° ì•„ë˜ ì ˆì°¨ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤.

```bash
cd ~
mv system system.bak
git clone git@gitlab.plura.internal:config/system.git
```

---

### 11-6. ì›ê²© ì €ì¥ì†Œ URL í™•ì¸ (ê¶Œì¥)

```bash
git remote -v
```

ì •ìƒ ì¶œë ¥ ì˜ˆ:

```
origin  git@gitlab.plura.internal:config/system.git (fetch)
origin  git@gitlab.plura.internal:config/system.git (push)
```

---

## ì´ ë‹¨ê³„ê¹Œì§€ ì™„ë£Œë˜ë©´

* âœ” ì´ë¯¸ cloneëœ Git ì €ì¥ì†Œë¥¼ **ì •ìƒì ìœ¼ë¡œ ì—…ë°ì´íŠ¸**í•  ìˆ˜ ìˆìŒ
* âœ” GitLab dev ì„œë²„ì™€ ë¡œì»¬ Ubuntu ì‘ì—… ë””ë ‰í„°ë¦¬ ë™ê¸°í™” ì™„ë£Œ
* âœ” ì´í›„ **staging / live ë°°í¬ ìë™í™”(CI/CD)** ë‹¨ê³„ë¡œ ë°”ë¡œ ì§„í–‰ ê°€ëŠ¥

---



